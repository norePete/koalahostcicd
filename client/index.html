<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Security-Policy-Report-Only" content="default-src https: report-uri /csp-violation" />

    <title>Payment</title>

    <link rel="stylesheet" href="./client/base.css" />
    <script src="https://js.stripe.com/v3/"></script>

    <!--<script src="./client/stripe.js" defer></script>-->
    <script src="./client/utils.js" defer></script>
    <script src="./client/index.js" defer></script>
  </head>
  <body>
    <main>
      <h1>Payment</h1>

      <p>Enable more payment method types <a
        href="https://dashboard.stripe.com/settings/payment_methods" target="_blank">in your
        dashboard</a>.</p>

      <ul id="output"><li>copy this into your wallet</li></ul>
      <button id="temp">Reveal private key</button>
      <form id="payment-form">
        <div id="link-authentication-element">
          <!-- Elements will create authentication element here -->
        </div>
        <div id="payment-element">
          <!-- Elements will create form elements here -->
        </div>
        <button id="submit">Pay now</button>
        <div id="error-message">
          <!-- Display error message to your customers here -->
        </div>
      </form>

      <div id="messages" role="alert" style="display: none;"></div>
    </main>
    <script>
window.onload = function() {
    let iframe = null;
    let iframeWindow = null;
    while(iframe === null) {
        iframe = document.querySelector('iframe');
    }
    console.log('found iframe');
    iframeWindow = iframe.contentWindow || iframe.contentDocument;
    if (iframeWindow.document) {
        iframeWindow.document.addEventListener('keydown', function(event) {
            console.log('Key pressed inside iframe: ' + event.key);
        }
    }
};
    </script>
  </body>
</html>
